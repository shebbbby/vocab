<div class="container">
<br>
<br>
  <p>
    <strong>Current List: </strong><span id="demo"></span>
  </p>
  <p id="wordstoaddparagraph" style="display:none;">
   <strong>Words to add to database (<span id="wordsToAddNumber"></span>):</strong>  <span id="wordsToAdd"></span>
   <br>
   <span style="border:1px solid black; width:150px;" class="btn btn-sm" onclick="downloadSynonymNewWords()">Add Words To Database</span>
  </p>
  <p>
   <strong># Words in Learning List:</strong>  <span id="numberInList"></span>
  </p>
<p>
 <strong>Cycle Duration:</strong>  <span id="cycleTime"></span>
</p>
<p>
 <strong>Cycle Speed<span id="defaultSpeed"> (Default)</span>:</strong> <span id="cycleSpeed"></span>
</p>
  <!-- <span style="float:left;" id="speed"></span><span> </span> -->
  <!-- <span style="float:left; margin-left:5px;" onclick="showSpeedInput()" class="fa fa-pencil edit-speed-on"> </span> </span>
  <span onclick="hideSpeedInput()" style="display: none; float:left; margin-left:5px;" class="fa fa-pencil edit-speed-off"> </span> -->
  <label for="speed-input">Seconds per word?</label>
  <br>
  <input id="speed-input" name="speed" type="number" onchange="changeSpeed()" placeholder="Seconds Per Word...">
  <br>
  <label for="random-number-input">Add How many words?</label>
  <br>

  <input  id="random-number-input" name="randomNumber" type="number" placeholder="# Words" onchange="addRandomWordsButton()">
  <!-- <p id="select-random-words" style="border:1px solid black; width:80px;" class="btn btn-sm" onclick="addRandomWordsButton()">Select</p> -->
  <br>
  <br>
  <p id="begin-cycle-button" style="border:1px solid black; width:80px;" class="btn btn-sm" onclick="startCycle()">Begin</p>
  <hr>

  <p id="display-words-list" style="border:1px solid black; display: none; width:80px;" class="btn btn-sm" onclick="displayWordsList()">Add Words</p>
<p style="display:none; color: green; border:1px solid green; width: 15%;" id="word-search-success">Word Added!</p>
<p style="display:none; color: red; border:1px solid red; width: 15%;" id="word-search-error">Sorry, Word not found!</p>
<p style="display:none; color: red; border:1px solid red; width: 15%;" id="repeat-word-error">You Already Have this word!</p>
<p style="display:none; color: red; border:1px solid red; width: 30%;" id="begin-error">You have to add at least 1 word to begin!</p>

<div id="hideUponBegin">
  <strong>Add New Word:</strong><br>
  <input id="age" type="text" name="firstname" value="">
  <!-- <button id="custom-button" onclick="showCustomInputs()"> Custom </button> -->
  <br>
    <br>
  <!-- <input id="age" type="text" name="firstname" value="" onchange="addWordUsingInput()"> -->
  <p style="border:1px solid black;" class="btn btn-sm" onclick="inputFiller()">Submit</p>
<form style="display:none;" id="hidden-inputs" method="post" action="/">
  <!-- style="display:none;" -->

  <label for="word-input"> Word </label>
  <input  id="word-input" name="word" type="text" required>
  <br>
  <label for="words-input"> Words </label>
  <input id="words-input" name="words" type="text" value="">
  <br>

  <label for="definition-input"> Definition </label>
  <input  id="definition-input" name="definition" type="text" step="0.10">
  <br>
  <label for="speech-input"> Speech </label>
  <input  id="speech-input" name="speech" type="text">
  <br>
  <label for="sentence-input"> Sentence </label>
  <input  id="sentence-input" name="sentence" type="text">
  <br>
  <label for="synonyms-input"> synonyms </label>
  <input  id="synonyms-input" name="synonyms" type="text">
  <br>
  <label for="relatedwords-input"> relatedwords </label>
  <input  id="relatedwords-input" name="relatedwords" type="text">
  <br>

  <label   for="antonyms-input"> antonyms </label>
  <input id="antonyms-input" name="antonyms" type="text">
  <br>

  <button id="word-submitter"> Save This Word </button>

</form>

<h2> All Words <span style="font-size: 20px;">(<span id="numberOfDatabaseWords"></span>)</span> </h2>


<% var noDatabaseArray = [] %>
<% console.log(noDatabaseArray) %>

<ul>
  <% listOfWords.forEach((oneWord) => { %>
    <li style="list-style: none;" class="word-list">
      <h3 style="display: inline;"> <a style="float:left;" href="/<%= oneWord._id %>"> <%= oneWord.word %> </a></h3>
      <!-- use a form with a button for delete instead of an anchor tag
           so that it can be a (semantically correct) POST route -->
      <form style="float:left; margin-left: 10px; class="delete-button" method="post" action="/<%= oneWord._id %>/delete">
        <button id="remove-<%= oneWord.word %>"> X </button>
      </form>
        <button style="float:left; display:block;" id="plus-<%= oneWord.word %>" onclick="addWord('<%= oneWord.word %>')"> + </button>
        <button onclick="removeWordFromStudyArray('<%= oneWord.word %>')" style="border: none;padding: 0;background: none; margin-left: 5px;"><i id="checkmark-<%= oneWord.word %>" style="color:green; display:none; float:left; margin-left: 5px;" class="fa fa-check" aria-hidden="true"></i></button>
    </li>
  <% }) %>
</ul>
</div>

<script>
// THis is the array of actual database words.
  databaseArray = [];
  <% listOfWords.forEach((oneWord) => { %>
    databaseArray.push('<%= oneWord.word %>');
      <% }) %>
      // Log all words in alphabetical order
      console.log(databaseArray.sort());
      document.getElementById('numberOfDatabaseWords').innerHTML = databaseArray.length;


  function getRandomWords(arr, n) {
        var result = new Array(n),
            len = arr.length,
            taken = new Array(len);
        if (n > len)
            throw new RangeError("getRandom: more elements taken than available");
        while (n--) {
            var x = Math.floor(Math.random() * len);
            result[n] = arr[x in taken ? taken[x] : x];
            taken[x] = --len;
        }
        return result;
  }
  function addRandomWordsToLearningList(number){
  var RandomWordsArray = getRandomWords(databaseArray, number);
  for(var i = 0; i <= RandomWordsArray.length-1; i++){
    document.getElementById('plus-'+ RandomWordsArray[i]).click()
  }
}
function addRandomWordsButton(){
var chosenNumber = document.querySelector('#random-number-input').value;
document.querySelector('#random-number-input').value = '';

  addRandomWordsToLearningList(chosenNumber)
}

// Function to count how many times a word exists in array
function countInArray(array, what){
    var count = 0;
    for (var i = 0; i < array.length; i++) {
        if (array[i] === what) {
            count++;
        }
    }
    return count;
}

// Create array with duplicate words
var duplicateWords = [];
for (var i = 0; i < databaseArray.length; i++) {
  var count = countInArray(databaseArray,databaseArray[i]);
  if(count > 1){
    duplicateWords.push(databaseArray[i]);
  }
}
// Create array with only 1 of the duplicate words
function squash(arr){
    var tmp = [];
    for(var i = 0; i < arr.length; i++){
        if(tmp.indexOf(arr[i]) == -1){
        tmp.push(arr[i]);
        }
    }
    return tmp;
}
var duplicateWordsOnce = squash(duplicateWords);
// Alert if a duplicate word exists
if(duplicateWordsOnce[0]){
  alert('The following word is duplicated and will be deleted: ' + duplicateWordsOnce);
  // Click remove button
  document.getElementById('remove-'+ duplicateWordsOnce[0]).click()
}
// Alert and delete empty values if there happens to somehow be one
if(document.getElementById('remove-')){
  alert('An empty value will be deleted: ""');
  // Click remove button
  document.getElementById('remove-').click()
}


</script>






<div>
  <p id="colorLabelInforation" style="display:none; position: relative; top:20px; left:10px;">
    <span style="color:blue;">In Learning List</span> -
    <span style="color:green;">In Database</span> -
    <span style="color:red;">Not In Either</span> -
    <span style="color:black;">Not Addable</span>
  </p>
  <div id="next-previous-buttons" style="position: relative; top:50px; left:280px; display: none;">
    <button id="previousWordButton" onclick="previousWord()"><</button>
    <button id="nextWordButton" onclick="nextWord()">></button>
    <!-- Meant to allow you to remove word from array. Doesnt work yet. -->
    <button id="removeWordButton" onclick="removeWordButton(currentFlashcardWord)">X</button>
  </div>
  <ul style="display: none;" class="flashcard" id="wordslist">

  </ul>
  <br>
  <br>
  <br>
  <br>
</div>
</div>
